(this["webpackJsonpmy-movie-list"]=this["webpackJsonpmy-movie-list"]||[]).push([[4],{236:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a.n(n),o=a(13),i=a(38),c=a(63),l=a(0),s=a.n(l),m=a(25),u=a(227),d=a(228),f=a(173),p=a(28),g=a(45),v=a(182),h=a(202),b=a.n(h),E=a(36),y=a(199),j=a.n(y),w=a(187),x=a(198),O=a.n(x),C=a(237),k=a(224),S=Object(f.a)((function(e){var t;return{search:(t={position:"relative",borderRadius:e.shape.borderRadius,width:"20rem",order:2},Object(m.a)(t,e.breakpoints.down("xs"),{order:3,width:"23rem",margin:"auto"}),Object(m.a)(t,e.breakpoints.down("sm"),{margin:"auto"}),Object(m.a)(t,"alignSelf","center"),t),searchIcon:Object(m.a)({padding:e.spacing(0,2),height:"100%",position:"absolute",right:20,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.palette.common.white},e.breakpoints.down("xs"),{right:50}),autoComplete:Object(m.a)({width:"20rem"},e.breakpoints.down("xs"),{margin:"auto"}),inputRoot:{color:"inherit"},inputInput:Object(m.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),N=Object(p.b)(null,(function(e){return{onUpdateMovieModal:function(t){return e(E.i(t))},onSetSelectedMovie:function(t){return e(E.h(t))}}}))((function(e){var t=Object(l.useState)(!1),a=Object(c.a)(t,2),n=a[0],m=a[1],u=Object(l.useState)([]),d=Object(c.a)(u,2),f=d[0],p=d[1],g=Object(l.useState)(),v=Object(c.a)(g,2),h=v[0],b=v[1],E=S(),y=e.onUpdateMovieModal,x=n&&0===f.length;Object(l.useEffect)((function(){var e=!0;if(h)return Object(i.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O()("http://api.themoviedb.org/3/search/movie?api_key=105094d957931ab7b01705c2f3d2dd58&query=".concat(h));case 3:return a=t.sent,t.next=6,a.json();case 6:(n=t.sent).results.length=2,e&&p(n.results.map((function(e){return e}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))(),function(){e=!1}}),[x,h]),Object(l.useEffect)((function(){n||p([])}),[n]);var N=function(e,t){e.preventDefault(),t&&y(t.id)},I=function(e){b(e.target.value)};return s.a.createElement("div",{className:E.search},s.a.createElement("div",{className:E.searchIcon},s.a.createElement(j.a,null)),s.a.createElement("form",{onSubmit:N},s.a.createElement(C.a,{className:E.autoComplete,id:"search movies",open:n,onOpen:function(){m(!0)},onClose:function(){m(!1)},popupIcon:!1,autoHighlight:!0,onChange:N,getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.title},options:f,loading:x,renderInput:function(e){return s.a.createElement(w.a,Object.assign({},e,{label:"Search movies...",variant:"outlined",onChange:I,value:h,InputProps:Object(o.a)(Object(o.a)({},e.InputProps),{},{endAdornment:s.a.createElement(s.a.Fragment,null,x?s.a.createElement(k.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})))})),I=a(83),M=a.n(I),T=a(226),R=a(225),A=a(39),B=Object(f.a)((function(e){var t,a;return{root:{flexGrow:1,backgroundColor:"black"},appBar:{background:"linear-gradient(to bottom, rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%)",display:"flex",boxShadow:"0px 0px",height:"10rem"},Toolbar:(t={display:"flex",justifyContent:"space-between",alignItems:"center",opacity:1,width:"100%",background:"linear-gradient(to bottom, rgba(0,0,0,1) 0%,rgba(0,0,0,0) 100%)",flexWrap:"wrap"},Object(m.a)(t,e.breakpoints.down("xs"),{height:"10rem",justifyContent:"space-between"}),Object(m.a)(t,e.breakpoints.down("sm"),{height:"7rem",justifyContent:"space-between"}),t),signOut:Object(m.a)({order:3,width:"8rem",marginRight:"3rem"},e.breakpoints.down("xs"),{order:1}),logo:(a={marginTop:"-1rem",order:1,width:"8rem"},Object(m.a)(a,e.breakpoints.down("md"),{width:"8rem"}),Object(m.a)(a,e.breakpoints.down("sm"),{width:"7rem"}),Object(m.a)(a,e.breakpoints.down("xs"),{width:"6rem"}),a)}})),L=Object(p.b)((function(e){return{selectedMovie:e.movies.selectedMovie}}),(function(e){return{onLogout:function(){return e(E.d())}}}))((function(e){var t=B(),a=Object(A.a)(),n=Object(R.a)(a.breakpoints.between("xs","sm"));return s.a.createElement("div",{className:t.root},s.a.createElement(T.a,{in:!0,timeout:{enter:500,exit:500}},s.a.createElement(u.a,{className:t.appBar},s.a.createElement(d.a,{className:t.Toolbar},s.a.createElement("img",{className:t.logo,src:M.a,alt:"Logo"}),s.a.createElement(g.b,{to:"/logout",className:t.signOut},s.a.createElement(v.a,{color:"secondary",className:t.signOut},s.a.createElement(b.a,{fontSize:n?"small":"medium"})," Sign out")),e.selectedMovie?s.a.createElement(N,{className:t.search}):null))))})),G=a(186),W=a(229),D=Object(f.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.primary.main,outline:0}}}));var F=function(e){var t=D();return s.a.createElement("div",null,s.a.createElement(G.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.modal,onClose:e.close,closeAfterTransition:!0,BackdropComponent:W.a,BackdropProps:{timeout:500}},s.a.createElement(T.a,{in:e.modal},s.a.createElement("span",null,e.children))))},z=a(88),P=a(233),U=a(175),_=a(230),q=a(232),H=a(239),J=a(231),Q=Object(f.a)((function(e){return{root:{maxWidth:400,margin:".5rem",zIndex:1e3},media:{width:350,height:140,opacity:.5},yourRatings:{zIndex:1e3,color:e.palette.secondary.main},cardActions:{display:"flex",justifyContent:"space-between",position:"relative",marginLeft:0}}}));function V(e){var t,a,n=Q(),r=Object(A.a)();return t=e.movie.title===e.title?{border:".1rem solid red"}:null,a=e.watched?{backgroundColor:r.palette.secondary.light}:null,s.a.createElement(U.a,{className:n.root},s.a.createElement(_.a,{onClick:e.select},s.a.createElement(J.a,{className:n.media,image:"https://image.tmdb.org/t/p/w500".concat(e.poster),title:e.title,movie:e.movie,style:t})),s.a.createElement(q.a,{className:n.cardActions,style:a},s.a.createElement(H.a,{name:"rating",className:n.yourRatings,value:e.rating,precision:.5,readOnly:!0,max:10,size:"small"}),s.a.createElement(v.a,{size:"small",color:"default",onClick:e.remove},"Remove Movie")))}var Y=a(184),K=a(189),X=a(238),Z=a(185),$=a(179),ee=Object(f.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",flexGrow:1,marginTop:"2.5rem"},filter:{display:"flex",justifyContent:"center",alignItems:"flex-end"},gridContainer:{flexGrow:1,marginTop:"2.5rem"},formControl:{margin:e.spacing(1),minWidth:120}}})),te=function(e){var t=ee(),a=null;return"title"===e.filterSelect?a=s.a.createElement(w.a,{className:t.formControl,id:"title",label:"Filter by Title",value:e.filterTitle,onChange:e.handleTitleChange}):"genre"===e.filterSelect?a=s.a.createElement($.a,{className:t.formControl},s.a.createElement(K.a,{id:"genre"},"Select Genre"),s.a.createElement(Z.a,{labelId:"genre",id:"genre",value:e.filterGenre,onChange:e.handleGenreChange},["Action","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Science Fiction","TV Movie","Thriller","War","Western"].map((function(e){return s.a.createElement(X.a,{value:e},e)})))):"watched"===e.filterSelect&&(a=s.a.createElement($.a,{className:t.formControl},s.a.createElement(K.a,{id:"watched"}),s.a.createElement(Z.a,{labelId:"watched",id:"watched",value:e.filterWatched,onChange:e.handleWatchedChange},s.a.createElement(X.a,{value:"watched"},"Seen"),s.a.createElement(X.a,{value:"not watched"},"Not Seen")))),s.a.createElement("div",{className:t.filter},s.a.createElement($.a,{className:t.formControl},s.a.createElement(K.a,{id:"filter"},"Select Filter"),s.a.createElement(Z.a,{labelId:"filter",id:"filter",value:e.filterSelect,onChange:e.handleSelectChange},s.a.createElement(X.a,{value:"title",name:"Title"},"Title"),s.a.createElement(X.a,{value:"genre",name:"Genre"},"Genre"),s.a.createElement(X.a,{value:"watched",name:"Genre"},"Watched"))),a)},ae=a(180),ne=Object(f.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",flexGrow:1,marginTop:"-5rem"},filter:{display:"flex",justifyContent:"center",alignItems:"flex-end"},gridContainer:{flexGrow:1,marginTop:"1rem"},formControl:{margin:e.spacing(1),minWidth:120}}})),re=Object(p.b)((function(e){return{movies:e.movies.movies,token:e.auth.token,userId:e.auth.userId,selectedMovie:e.movies.selectedMovie}}),(function(e){return{onRemoveFromMovieList:function(t,a){return e(E.f(t,a))},onSetSelectedMovie:function(t){return e(E.h(t))},onSetMovieList:function(t){return e(E.g(t))}}}))((function(e){var t,a=Object(l.useState)(""),n=Object(c.a)(a,2),o=n[0],m=n[1],u=Object(l.useState)(""),d=Object(c.a)(u,2),f=d[0],p=d[1],g=Object(l.useState)(""),v=Object(c.a)(g,2),h=v[0],b=v[1],E=e.movies,y=e.onRemoveFromMovieList,j=e.onSetSelectedMovie,w=e.token,x=ne(),O=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t,w);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(E){var C=Object(z.a)(E);"title"===e.filterSelect?C=C.filter((function(e){return e.title.toLowerCase().includes(o.toLowerCase())})):"genre"===e.filterSelect?f&&(C=E.filter((function(e){return e.genres.some((function(e){return e.name===f}))}))):"watched"===e.filterSelect&&(C="watched"===h?E.filter((function(e){return!0===e.watched})):E.filter((function(e){return!1===e.watched}))),t=C.map((function(t){return s.a.createElement(ae.a,{in:!0,key:t.key},s.a.createElement(P.a,{key:t.key,item:!0},s.a.createElement(V,{item:!0,title:t.title,overview:t.overview,rating:t.rating,poster:t.poster_path,remove:function(){return O(t.key)},select:function(){j(t)},key:t.key,movie:e.selectedMovie,watched:t.watched})))}))}else t=null;return s.a.createElement(Y.a,{component:"div",className:x.root},0!==E.length?s.a.createElement(te,{filterTitle:o,handleTitleChange:function(e){m(e.target.value)},filterGenre:f,handleGenreChange:function(e){p(e.target.value)},filterSelect:e.filterSelect,handleSelectChange:e.handleSelect,handleWatchedChange:function(e){b(e.target.value)},filterWatched:h}):null,s.a.createElement(P.a,{container:!0,className:x.gridContainer,direction:"row",justify:"center",alignItems:"center"},t))})),oe=a(234),ie=Object(f.a)((function(e){return{root:{width:"100%",height:"57rem",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",backgroundColor:e.palette.background.paper},black:{width:"100%",height:"57rem",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",backgroundColor:"black"},img:Object(m.a)({position:"absolute",opacity:.2,width:"160rem"},e.breakpoints.between("xs","sm"),{width:"90rem"}),infoContainer:Object(m.a)({display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"45rem",zIndex:100},e.breakpoints.down("xs"),{width:"20rem"}),ratingsContainer:Object(m.a)({display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem"},e.breakpoints.down("xs"),{flexDirection:"column"}),yourRatings:{zIndex:1e3,color:e.palette.secondary.main,margin:e.spacing(1)},audienceStars:{margin:e.spacing(1)},startContainer:{display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center"}}}));var ce=Object(p.b)((function(e){return{selectedMovie:e.movies.selectedMovie,token:e.auth.token,movieChanged:e.movies.movieChanged}}),(function(e){return{onUpdateStarRating:function(t,a,n,r){return e(E.j(t,a,n,r))},onUpdateWatched:function(t,a,n){return e(E.k(t,a,n))}}}))((function(e){var t=Object(l.useState)(!0),a=Object(c.a)(t,2),n=a[0],m=a[1],u=Object(l.useState)(),d=Object(c.a)(u,2),f=d[0],p=d[1],g=ie(),h=e.selectedMovie,b=e.onUpdateStarRating,E=e.onUpdateWatched,y=e.movieChanged,j=function(){var t=Object(i.a)(r.a.mark((function t(a,n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=Object(o.a)({},h)).rating=n,b(h.key,e.token,i,n);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),w=function(){var t=Object(i.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=Object(o.a)({},h)).watched=!a.watched,E(h.key,a,e.token);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=null;x=s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80",className:g.img,alt:"backgro undImage"}),s.a.createElement(Y.a,{component:"div",className:g.startContainer},s.a.createElement(oe.a,{variant:"h1",component:"h2",color:"secondary",gutterBottom:!0},"Start building your Movie List!"),s.a.createElement(N,null))),Object(l.useEffect)((function(){"first load"===y?p(h):y&&(m(!1),setTimeout((function(){p(h),m(!0)}),500))}),[h,y]);var O=Object(A.a)(),C=Object(R.a)(O.breakpoints.down("xs"));if(f){var k="https://image.tmdb.org/t/p/original".concat(f.backdrop_path);x=s.a.createElement(s.a.Fragment,null,s.a.createElement(Y.a,{component:"div",className:g.infoContainer},s.a.createElement(oe.a,{variant:"h1",component:"h2",color:"secondary"},f.title),s.a.createElement(oe.a,{variant:"h4",color:"textPrimary",gutterBottom:!0},f.tagline),s.a.createElement(oe.a,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},f.overview),f.watched?s.a.createElement(v.a,{color:"secondary",variant:"contained",onClick:w},"seen"):s.a.createElement(v.a,{color:"primary",variant:"contained",onClick:w},"not seen"),s.a.createElement("div",{className:g.ratingsContainer},s.a.createElement(Y.a,{component:"div",className:g.ratingContainer},s.a.createElement(oe.a,{variant:"h5",color:"textSecondary"},"AUDIENCE RATING:"),s.a.createElement(H.a,{className:g.audienceStars,name:"rating",value:f.vote_average,precision:.5,onChange:j,max:10,readOnly:!0,size:C?"xsall":"medium"})),s.a.createElement(Y.a,{component:"div",className:g.ratingContainer},s.a.createElement(oe.a,{variant:"h5",color:"textSecondary"},"YOUR RATING:"," "),s.a.createElement(H.a,{name:"rating",className:g.yourRatings,value:f.rating,precision:.5,onChange:j,disabled:!f.watched,max:10,size:C?"xsall":"medium"})))),s.a.createElement("img",{src:k,className:g.img,alt:"backgroundImage"}))}return s.a.createElement(Y.a,{className:g.black},s.a.createElement(T.a,{in:n,timeout:{enter:700,exit:700}},s.a.createElement(Y.a,{className:g.root},x)))})),le=a(48),se=function(e,t){return function(a){var n=function(e){var t=Object(l.useState)(null),a=Object(c.a)(t,2),n=a[0],r=a[1],o=e.interceptors.request.use((function(e){return r(null),e})),i=e.interceptors.response.use((function(e){return e}),(function(e){r(e)}));Object(l.useEffect)((function(){return function(){e.interceptors.request.eject(o),e.interceptors.response.eject(i)}}),[o,i,e.interceptors.request,e.interceptors.response]);return[n,function(){r(null)}]}(t),r=Object(c.a)(n,2),o=r[0],i=r[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(F,{modal:o,onClose:i},o?o.message:null),s.a.createElement(e,a))}},me=a(235),ue=Object(f.a)((function(e){var t;return{root:(t={display:"flex",width:"70rem",height:"40rem"},Object(m.a)(t,e.breakpoints.down("sm"),{height:"37rem",width:"45rem"}),Object(m.a)(t,e.breakpoints.down("xs"),{height:"37rem",width:"20rem"}),t),details:{display:"flex"},content:{display:"flex",flexDirection:"column",flex:"5"},cover:Object(m.a)({flex:"1 0 40%",display:"flex",justifyContent:"center",alignItems:"center"},e.breakpoints.down("xs"),{flex:"1 0 20%"}),tagline:{flex:"3 3 90%"},ratingsContainer:{display:"flex",flexDirection:"column"},bottomContainer:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},button:{marginTop:"1rem"}}})),de=function(e){var t,a=ue(),n=(e.movie,e.moviePoster),r=e.genres,o=e.checkMovieAdded,i=Object(A.a)(),c=Object(R.a)(i.breakpoints.down("xs"));n||(t=s.a.createElement(oe.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"No poster available"));var l=r.map((function(e){return e.name+" "}));return s.a.createElement(U.a,{className:a.root},s.a.createElement("div",{className:a.details},s.a.createElement(me.a,{className:a.content},s.a.createElement("div",{className:a.tagline},s.a.createElement(oe.a,{variant:c?"h4":"h3",gutterBottom:!0,color:"secondary"},e.title),s.a.createElement(oe.a,{variant:c?"h5":"h4",color:"textPrimary",gutterBottom:!0},e.tagline),s.a.createElement(oe.a,{variant:c?"subtitle2":"subtitle1",color:"textPrimary",gutterBottom:!0},e.overview),s.a.createElement(oe.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},l),s.a.createElement(oe.a,{variant:"h5",color:"textSecondary",gutterBottom:!0,display:"inline"},"Runtime:"),s.a.createElement(oe.a,{variant:"h5",color:"textPrimary",gutterBottom:!0,display:"inline"},"\xa0\xa0",e.runTime," mins")),s.a.createElement("div",{className:a.bottomContainer},s.a.createElement("div",{className:a.ratingsContainer},s.a.createElement(oe.a,{variant:c?"h5":"h4",color:"textSecondary"},"Rating:"),s.a.createElement(H.a,{className:a.audienceStars,name:"rating",value:e.voteAverage,precision:1,max:10,readOnly:!0,size:c?"xsall":"medium"})),s.a.createElement(v.a,{variant:"contained",color:"secondary",onClick:e.addMovie,disabled:o,size:"xsall",className:a.button},"add to list")))),s.a.createElement(J.a,{className:a.cover,image:n,src:"No poster available"},t))},fe=Object(f.a)({root:{display:"flex",flexDirection:"column",positon:"relative"},gradient:{width:"100%",height:"30rem",position:"absolute",top:"39rem",background:"linear-gradient(0deg, rgba(2,0,36,0) 0%, rgba(0,0,0,1) 46%, rgba(0,212,255,0) 100%)"}});t.default=Object(p.b)((function(e){return{movies:e.movies.movies,token:e.auth.token,userId:e.auth.userId,modal:e.movies.modal,searchedMovie:e.movies.searchedMovie}}),(function(e){return{onRemoveFromMovieList:function(t,a){return e(E.f(t,a))},onSetSelectedMovie:function(t){return e(E.h(t))},onSetMovieList:function(t){return e(E.g(t))},onModalToggle:function(){return e(E.e())},onAddToMovieList:function(t,a){return e(E.a(t,a))}}}))(se((function(e){var t=Object(l.useState)(!0),a=Object(c.a)(t,2),n=a[0],m=a[1],u=Object(l.useState)(""),d=Object(c.a)(u,2),f=d[0],p=d[1],g=fe(),v=e.onSetMovieList,h=e.token,b=e.userId,E=e.onModalToggle,y=e.onAddToMovieList,j=e.searchedMovie,w=e.movies,x=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=Object(o.a)({},j)).userId=b,y(t,h),p(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){Object(i.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="?auth="+h+'&orderBy="userId"&equalTo="'+b+'"',e.next=4,le.a.get("/movies.json"+t);case 4:a=e.sent,n=Object.entries(a.data).map((function(e){return e[1].key=e[0],e[1]})),v(n),m(!1),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[v,h,b]);var O=null;j&&j.poster_path&&(O="https://image.tmdb.org/t/p/w500".concat(j.poster_path));var C=null,k=!1;return w&&j&&(k=w.some((function(e){return e.id===j.id}))),n||(C=s.a.createElement("div",{className:g.root},s.a.createElement(L,null),s.a.createElement(ce,null),s.a.createElement("div",{className:g.gradient}),s.a.createElement(re,{handleSelect:function(e){return function(e){p(e.target.value)}(e)},filterSelect:f}),j?s.a.createElement(F,{modal:e.modal,close:function(){E()}},s.a.createElement(de,{addMovie:x,moviePoster:O,runTime:j.runtime,genres:j.genres,checkMovieAdded:k,title:j.title,tagline:j.tagline,overview:j.overview,voteAverage:j.vote_average})):null)),s.a.createElement(s.a.Fragment,null,C)}),le.a))}}]);
//# sourceMappingURL=4.97f0d4a6.chunk.js.map